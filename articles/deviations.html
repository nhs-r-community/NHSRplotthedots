<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Deviations from Excel defaults • NHSRplotthedots</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deviations from Excel defaults">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NHSRplotthedots</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/NHSRplotthedots.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/number-of-points-required.html">Number of points required</a></li>
    <li><a class="dropdown-item" href="../articles/deviations.html">Deviations from Excel defaults</a></li>
    <li><a class="dropdown-item" href="../articles/other-spc-tools.html">Other SPC tools</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nhs-r-community/NHSRplotthedots/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Deviations from Excel defaults</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nhs-r-community/NHSRplotthedots/blob/main/vignettes/deviations.Rmd" class="external-link"><code>vignettes/deviations.Rmd</code></a></small>
      <div class="d-none name"><code>deviations.Rmd</code></div>
    </div>

    
    
<p>The overall intent of this package is to mimic as completely as
possible the output available from the <a href="https://www.england.nhs.uk/publication/making-data-count/" class="external-link">NHSEI
Making Data Count</a> Excel tools. However, we have identified some
areas where the R implementation should deviate from the main Excel
tools. We have done this only after careful consideration, and we
believe there is a benefit to deviating.</p>
<p>This vignette documents what these differences are, and how to set
options to over-ride them, so that if you need to you can completely
replicate the output that the Excel tools would create.</p>
<p>You may consider this important if for example you are publishing
outputs from both the Excel tool and this R tool, and need the outputs
to be completely consistent.</p>
<div class="section level2">
<h2 id="list-of-deviations">List of Deviations<a class="anchor" aria-label="anchor" href="#list-of-deviations"></a>
</h2>
<div class="section level3">
<h3 id="treatment-of-outlying-points">1. Treatment of outlying points<a class="anchor" aria-label="anchor" href="#treatment-of-outlying-points"></a>
</h3>
<p>By default, this package will screen outlying points, removing them
from the moving range calculation, and hence from the process limits
calculation. This is in line with the published paper:</p>
<blockquote>
<p>Nelson, Lloyd S. (1982) Control Charts for Individual Measurements,
<em>Journal of Quality Technology</em> 14(3): 172-173</p>
</blockquote>
<p>It is discussed further in the book:</p>
<blockquote>
<p>Provost, Lloyd P. &amp; Murray, Sandra K. (2011) <em>The Health Care
Data Guide: Learning from Data for Improvement</em>, San Francisco, CA:
Jossey-Bass, pp.155, 192</p>
</blockquote>
<p>The “Making Data Count” Excel tools do not screen outlying points,
and all points are included in the moving range and limits calculations.
If outlying points exist, the process limits on the Excel tools will
therefore be wider than if outlying points were screened from the
calculation.</p>
<p>This behaviour is controlled by the <code>screen_outliers</code>
argument. By default, <code>screen_outliers = TRUE</code>.</p>
<p>To replicate the Excel method, set the argument
<code>screen_outliers = FALSE</code>.</p>
<p>The two charts below demonstrate the default, and how to over-ride to
replicate the Excel tools.</p>
<div class="section level4">
<h4 id="r-package-default">R Package Default:<a class="anchor" aria-label="anchor" href="#r-package-default"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">10</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-03-22"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># screen_outliers = TRUE by default</span></span>
<span><span class="va">spc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ptd_spc.html">ptd_spc</a></span><span class="op">(</span><span class="va">df</span>, value_field <span class="op">=</span> <span class="va">data</span>, date_field <span class="op">=</span> <span class="va">date</span><span class="op">)</span></span>
<span><span class="va">spc_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>      <span class="st">"UPL = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">upl</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>      <span class="st">", Mean = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">mean_col</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>      <span class="st">", LPL = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">lpl</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-1-1.png" alt="An SPC chart labelled 'Data' on the y-axis, with dates from 22 March 2021 to 8 April 2021, at 1-day intervals, on the x-axis. From left to right the line shows four grey common cause points followed by a single blue special cause improvement point followed by a further 12 grey common cause points. A caption reports the upper process limit as 4.6, the mean as 1.94 and the lower process limit as -0.72." width="672"><p class="caption">
An SPC chart labelled ‘Data’ on the y-axis, with dates from 22 March
2021 to 8 April 2021, at 1-day intervals, on the x-axis. From left to
right the line shows four grey common cause points followed by a single
blue special cause improvement point followed by a further 12 grey
common cause points. A caption reports the upper process limit as 4.6,
the mean as 1.94 and the lower process limit as -0.72.
</p>
</div>
</div>
<div class="section level4">
<h4 id="over-riding-to-replicate-making-data-count-excel-output">Over-riding to replicate “Making Data Count” Excel output:<a class="anchor" aria-label="anchor" href="#over-riding-to-replicate-making-data-count-excel-output"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setting screen_outliers = FALSE produces the same output as Excel</span></span>
<span><span class="va">spc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ptd_spc.html">ptd_spc</a></span><span class="op">(</span><span class="va">df</span>, value_field <span class="op">=</span> <span class="va">data</span>, date_field <span class="op">=</span> <span class="va">date</span>, screen_outliers <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">spc_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>      <span class="st">"UPL = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">upl</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>      <span class="st">", Mean = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">mean_col</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>      <span class="st">", LPL = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">spc_data</span><span class="op">$</span><span class="va">lpl</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-2-1.png" alt="An SPC chart labelled 'Data' on the y-axis, with dates from 22 March 2021 to 8 April 2021, at 1-day intervals, on the x-axis. From left to right the line shows four grey common cause points followed by a single blue special cause improvement point followed by a further 12 grey common cause points. A caption reports the upper process limit as 6.95, the mean as 1.94 and the lower process limit as -3.06." width="672"><p class="caption">
An SPC chart labelled ‘Data’ on the y-axis, with dates from 22 March
2021 to 8 April 2021, at 1-day intervals, on the x-axis. From left to
right the line shows four grey common cause points followed by a single
blue special cause improvement point followed by a further 12 grey
common cause points. A caption reports the upper process limit as 6.95,
the mean as 1.94 and the lower process limit as -3.06.
</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="breaking-of-lines">2. Breaking of lines<a class="anchor" aria-label="anchor" href="#breaking-of-lines"></a>
</h3>
<p>By default, this package will break process and limit lines when a
plot is rebased. The Excel tool draws all lines as continuous lines.
However, rebasing is a change to the process, so by breaking lines it
more clearly indicates that a change in process has happened.</p>
<p>This can be controlled with the <code>break_lines</code> argument.
There are 4 possible values:</p>
<ul>
<li>“both” (default)</li>
<li>“limit” (to just break the limit lines, but leave the process line
connected)</li>
<li>“process” (to just break the process line, but leave the limit lines
connected)</li>
<li>“none” (as per the Excel tool).</li>
</ul>
<p>Examples of these 4 are shown below:</p>
<div class="section level4">
<h4 id="r-package-default-1">R Package Default:<a class="anchor" aria-label="anchor" href="#r-package-default-1"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spc_data</span> <span class="op">&lt;-</span> <span class="va">ae_attendances</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">period</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="va">attendances</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ptd_spc.html">ptd_spc</a></span><span class="op">(</span><span class="va">attendances</span>, <span class="va">period</span>, rebase <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2017-04-01"</span>, <span class="st">"2018-04-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in ptd_add_short_group_warnings(.): Some groups have 'n &lt; 12'</span></span>
<span><span class="co">#&gt; observations. These have trial limits, which will be revised with each</span></span>
<span><span class="co">#&gt; additional observation until 'n = fix_after_n_points' has been reached.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">spc_data</span>, break_lines <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-3-1.png" alt="An SPC chart labelled 'Attendances' on the y-axis, with dates from 1 April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The dates are presented at 45 degrees to the x-axis. The line chart has three sections, each with twelve grey common cause points on the process line. Each section has its own upper process limit, mean, and lower process limit lines, that are not connected to the lines of another section. The process line is also split into three sections. A caption states 'Some trial limits created by groups of fewer than 12 points exist. These will become more reliable as more data is added.'" width="672"><p class="caption">
An SPC chart labelled ‘Attendances’ on the y-axis, with dates from 1
April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The
dates are presented at 45 degrees to the x-axis. The line chart has
three sections, each with twelve grey common cause points on the process
line. Each section has its own upper process limit, mean, and lower
process limit lines, that are not connected to the lines of another
section. The process line is also split into three sections. A caption
states ‘Some trial limits created by groups of fewer than 12 points
exist. These will become more reliable as more data is added.’
</p>
</div>
</div>
<div class="section level4">
<h4 id="just-breaking-the-limit-lines">Just breaking the limit lines:<a class="anchor" aria-label="anchor" href="#just-breaking-the-limit-lines"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">spc_data</span>, break_lines <span class="op">=</span> <span class="st">"limits"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-4-1.png" alt="An SPC chart labelled 'Attendances' on the y-axis, with dates from 1 April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The line chart has three sections, each with twelve grey common cause points on the process line. Each section has its own upper process limit, mean, and lower process limit lines, that are not connected to the lines of another section. The process line is unbroken. A caption states 'Some trial limits created by groups of fewer than 12 points exist. These will become more reliable as more data is added.'" width="672"><p class="caption">
An SPC chart labelled ‘Attendances’ on the y-axis, with dates from 1
April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The
line chart has three sections, each with twelve grey common cause points
on the process line. Each section has its own upper process limit, mean,
and lower process limit lines, that are not connected to the lines of
another section. The process line is unbroken. A caption states ‘Some
trial limits created by groups of fewer than 12 points exist. These will
become more reliable as more data is added.’
</p>
</div>
</div>
<div class="section level4">
<h4 id="just-breaking-the-process-line">Just breaking the process line:<a class="anchor" aria-label="anchor" href="#just-breaking-the-process-line"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">spc_data</span>, break_lines <span class="op">=</span> <span class="st">"process"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-5-1.png" alt="An SPC chart labelled 'Attendances' on the y-axis, with dates from 1 April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The line chart has three sections, each with twelve grey common cause points on the process line. Each section has its own upper process limit, mean, and lower process limits, but the lines for these are unbroken between sections. The process line is however broken between sections. A caption states 'Some trial limits created by groups of fewer than 12 points exist. These will become more reliable as more data is added.'" width="672"><p class="caption">
An SPC chart labelled ‘Attendances’ on the y-axis, with dates from 1
April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The
line chart has three sections, each with twelve grey common cause points
on the process line. Each section has its own upper process limit, mean,
and lower process limits, but the lines for these are unbroken between
sections. The process line is however broken between sections. A caption
states ‘Some trial limits created by groups of fewer than 12 points
exist. These will become more reliable as more data is added.’
</p>
</div>
</div>
<div class="section level4">
<h4 id="over-riding-to-replicate-making-data-count-excel-output-1">Over-riding to replicate “Making Data Count” Excel output:<a class="anchor" aria-label="anchor" href="#over-riding-to-replicate-making-data-count-excel-output-1"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">spc_data</span>, break_lines <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-6-1.png" alt="An SPC chart labelled 'Attendances' on the y-axis, with dates from 1 April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The line chart has three sections, each with twelve grey common cause points on the process line. Each section has its own upper process limit, mean, and lower process limits, but the lines for these are unbroken between sections. The process line is also unbroken between the sections. A caption states 'Some trial limits created by groups of fewer than 12 points exist. These will become more reliable as more data is added.'" width="672"><p class="caption">
An SPC chart labelled ‘Attendances’ on the y-axis, with dates from 1
April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The
line chart has three sections, each with twelve grey common cause points
on the process line. Each section has its own upper process limit, mean,
and lower process limits, but the lines for these are unbroken between
sections. The process line is also unbroken between the sections. A
caption states ‘Some trial limits created by groups of fewer than 12
points exist. These will become more reliable as more data is added.’
</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="x-axis-text-angle">3. X Axis Text Angle<a class="anchor" aria-label="anchor" href="#x-axis-text-angle"></a>
</h3>
<p>As can be seen in the plots above, by default this package will print
x axis text rotated by 45 degrees for better utilisation of space, and
readability. Excel’s behaviour is to print this text at 90 degrees to
the axis.</p>
<p>Text angle can be over-ridden by passing a ggplot
<code>theme()</code> into the <code>theme_override</code> argument of
the plot function. Any of the modifications documented in the <a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">ggplot2 theme
documentation</a> can be made, but in this case we just need to modify
<code>axis.text.x</code>.</p>
<div class="section level4">
<h4 id="to-re-instate-90-degree-axis-text">To re-instate 90 degree axis text:<a class="anchor" aria-label="anchor" href="#to-re-instate-90-degree-axis-text"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ae_attendances</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">period</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="va">attendances</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ptd_spc.html">ptd_spc</a></span><span class="op">(</span><span class="va">attendances</span>, <span class="va">period</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>theme_override <span class="op">=</span> <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="deviations_files/figure-html/unnamed-chunk-7-1.png" alt="An SPC chart labelled 'Attendances' on the y-axis, with dates from 1 April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The dates are presented at 90 degrees to the x-axis. The line chart has 36 grey common cause points on the process line. There are dashed lines for the upper and lower process limits and a solid line for the mean." width="672"><p class="caption">
An SPC chart labelled ‘Attendances’ on the y-axis, with dates from 1
April 2016 to 1 March 2019, at 1-month intervals, on the x-axis. The
dates are presented at 90 degrees to the x-axis. The line chart has 36
grey common cause points on the process line. There are dashed lines for
the upper and lower process limits and a solid line for the mean.
</p>
</div>
<hr>
<p>Find the package code on <a href="https://github.com/nhs-r-community/NHSRplotthedots" class="external-link">GitHub</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Reading, Simon Wellesley-Miller, Zoë Turner, Tom Jemmett, Tom Smith, Chris Mainey, John MacKintosh, Marcos Fabietti, Fran Barton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
